{% load static %}
<div class="navbar">
    <nav>
        <div class="navbar-section">
            <h2 class="navbar-title">
                {% if estado == 'pendientes' %}
                    Panel de solicitudes pendientes
                {% elif estado == 'aprobados' %}
                    Panel de solicitudes aprobadas
                {% elif estado == 'rechazados' %}
                    Panel de solicitudes rechazadas
                {% elif estado == 'card_detail' %}
                    Detalle de solicitud
                {% else %}
                    Panel de control
                {% endif %}
            </h2>
        </div>
        
        <div class="navbar-actions">
            <div class="navbar-search">
                <input type="text" placeholder="Buscar solicitudes..." id="search-filter-input">
            </div>
            
            <button class="notification-button" title="Notificaciones">
                <!-- SVG de notificación -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                    <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                </svg>
                <span class="notification-badge">3</span>
            </button>
            
            <form id="logout-form" method="post" action="{% url 'logout' %}">
                {% csrf_token %}
                <button type="submit" title="Cerrar sesión">
                    <!-- SVG de logout -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                </button>
            </form>
        </div>
    </nav>
</div>

<script>
// Basic search filtering script
document.addEventListener('DOMContentLoaded', function() {
    const searchInput = document.getElementById('search-filter-input');
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(card => {
                const nameElement = card.querySelector('.user-name');
                const educationElement = card.querySelector('.education-title');
                
                const name = nameElement ? nameElement.textContent.toLowerCase() : '';
                const education = educationElement ? educationElement.textContent.toLowerCase() : '';
                
                if (name.includes(searchTerm) || education.includes(searchTerm)) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
            
            // Show empty state message if no results
            const cardContainer = document.getElementById('card-container');
            const emptyState = document.querySelector('.empty-state') || 
                               (function() {
                                   const div = document.createElement('div');
                                   div.className = 'empty-state';
                                   div.innerHTML = '<p>No se encontraron resultados para tu búsqueda</p>';
                                   return div;
                               })();
            
            const visibleCards = Array.from(cards).filter(card => card.style.display !== 'none');
            
            if (visibleCards.length === 0 && searchTerm) {
                if (!document.querySelector('.empty-state')) {
                    cardContainer.appendChild(emptyState);
                }
            } else if (document.querySelector('.empty-state')) {
                document.querySelector('.empty-state').remove();
            }
        });
    }
});
</script>